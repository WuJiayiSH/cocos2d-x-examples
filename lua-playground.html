<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>Emscripten-Generated Code</title><style>.emscripten{padding-right:0;margin-left:auto;margin-right:auto;display:block}textarea.emscripten{font-family:monospace;display:inline;width:100%}div.emscripten{margin-left:280px;text-align:center;color:#ccc}div.emscripten_status{left:280px;right:0;top:300px;position:absolute;text-align:center;color:#ccc}div.emscripten_border{margin-left:280px}canvas.emscripten{border:0 none;background-color:#000;width:960px;height:640px}table{border-collapse:collapse}th.filename{width:200px;text-align:left;color:#0af}th.actions{width:70px;text-align:right;color:#0af}td.filename{width:200px}td.actions{width:70px;text-align:right}.sidebar{height:100%;width:280px;position:fixed;z-index:1;top:0;left:0;overflow-x:hidden;background-color:#222;color:#bbb}hr{border:none;border-top:1px solid #444;height:1px}a.filename{color:#bbb}a.filename:hover{color:#0af}a.dirname{color:#0af}div.dir_actions{text-align:left;margin-top:10px}a.dir_action{color:#ccc;background-color:#444;border:solid 2px #444;text-decoration:none}a.dir_action:hover{color:#0af}a.file_action{color:#ccc}a.file_action:hover{color:#0af}svg{vertical-align:text-bottom}div.editor{left:280px;right:0;top:0;bottom:0;position:absolute;display:none}div.editor_pane{left:0;right:0;top:22px;bottom:0;position:absolute;overflow:hidden}div.editor_close{float:right}div.editor_header{width:100%;height:22px;border:0 none;background-color:#222;color:#ccc;display:inline-block}div.imageviewer{left:280px;right:0;top:0;bottom:0;position:absolute;display:none;background-color:#000000cc}img.imageviewer{left:0;right:0;top:0;bottom:0;position:absolute;margin:auto}div.imageviewer_close{float:right;color:#ccc}body{background-color:#444}@-webkit-keyframes rotation{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotation{from{-moz-transform:rotate(0)}to{-moz-transform:rotate(360deg)}}@-o-keyframes rotation{from{-o-transform:rotate(0)}to{-o-transform:rotate(360deg)}}@keyframes rotation{from{transform:rotate(0)}to{transform:rotate(360deg)}}</style></head><body><div class=editor id=editor><div class=editor_header><span id=editorPath></span><div class=editor_close id=editorClose onclick=Cocos2dxHelper.closeEditor()>X</div></div><div class=editor_pane id=editorPane></div></div><div class=imageviewer id=imageViewer><div class=imageviewer_close id=imageViewerClose onclick='document.getElementById("imageViewer").style.display="none"'>X</div></div><div class=sidebar valign=top><div><b id=currentDir></b></div><div class=dir_actions><a class=dir_action href=# onclick=Cocos2dxHelper.uploadFiles()><svg class=ionicon height=20 viewBox="0 0 512 512"width=20 xmlns=http://www.w3.org/2000/svg><path d="M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z"fill=none stroke=currentColor stroke-linejoin=round stroke-width=32 /><path d="M256 56v120a32 32 0 0032 32h120"fill=none stroke=currentColor stroke-linejoin=round stroke-width=32 stroke-linecap=round /></svg>Add File<a><a class=dir_action href=# onclick=Cocos2dxHelper.newFolder()><svg class=ionicon height=20 viewBox="0 0 512 512"width=20 xmlns=http://www.w3.org/2000/svg><path d="M440 432H72a40 40 0 01-40-40V120a40 40 0 0140-40h75.89a40 40 0 0122.19 6.72l27.84 18.56a40 40 0 0022.19 6.72H440a40 40 0 0140 40v240a40 40 0 01-40 40zM32 192h448"fill=none stroke=currentColor stroke-linejoin=round stroke-width=32 stroke-linecap=round /></svg>New Folder<a></a></a></div><hr><div><table id=fileList></table></div></div><div class=emscripten_border><div class=emscripten_status><div id=status>Downloading...</div><div><progress hidden id=progress max=100 value=0></progress></div></div><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas></div><div class=emscripten><input type=checkbox id=resize>Resize canvas <input type=checkbox id=pointerLock checked>Lock/hide mouse pointer     <input type=button onclick='Module.requestFullscreen(document.getElementById("pointerLock").checked,document.getElementById("resize").checked)'value=Fullscreen> | <input type=button onclick='Module.ccall("cocos_ccdirector_pause")'value=Pause> <input type=button onclick='Module.ccall("cocos_ccdirector_resume")'value=Resume> <input type=button onclick='Module.ccall("cocos_ccdirector_step")'value=Step></div><div class=emscripten><textarea class=emscripten id=output rows=4></textarea></div><script>var statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),Module={preRun:[],postRun:[],print:function(){var e=document.getElementById("output");return e&&(e.value=""),function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments).join(" ")),console.log(t),e&&(e.value+=t+"\n",e.scrollTop=e.scrollHeight)}}(),printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",(function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1):(progressElement.value=null,progressElement.max=null,progressElement.hidden=!0),statusElement.innerHTML=e)}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};Module.setStatus("Downloading..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}}</script><script>Module.preRun.push((function(){addRunDependency("sync_writable_path"),FS.mkdir("/cocos2dxWritablePath"),FS.mount(IDBFS,{},"/cocos2dxWritablePath"),FS.syncfs(!0,(function(e){if(e)throw e;removeRunDependency("sync_writable_path"),FS.analyzePath("/cocos2dxWritablePath/main.lua").exists||FS.writeFile("/cocos2dxWritablePath/main.lua",'-- You need to refresh to see the result after you made any change to the files\ncc.Label:createWithSystemFont("Hello World", "Arial", 40)\n  :move(display.cx, display.cy)\n  :addTo(display.getRunningScene())\n'),Cocos2dxHelper.refreshFileList("/cocos2dxWritablePath")}))}))</script><script>window.Cocos2dxHelper={refreshFileList:function(e){Cocos2dxHelper.currentDir=e||Cocos2dxHelper.currentDir;for(var t=document.getElementById("currentDir");t.lastChild;)t.removeChild(t.lastChild);for(var r=Cocos2dxHelper.currentDir.split("/"),o=1;o<r.length;o++){var n=document.createElement("a");n.href="#",n.setAttribute("class","dirname"),n.innerText=r[o];const e=r.slice(0,o+1).join("/");n.onclick=function(){Cocos2dxHelper.refreshFileList(e)},t.appendChild(n),t.appendChild(document.createTextNode(" / "))}for(var i=document.getElementById("fileList");i.lastChild;)i.removeChild(i.lastChild);var l=document.createElement("tr");l.innerHTML='<th class="filename">Files</th><th class="actions">Actions</th>',i.appendChild(l);var s=FS.readdir(Cocos2dxHelper.currentDir);for(o=2;o<s.length;o++){var a=s[o],c=Cocos2dxHelper.currentDir+"/"+a,d=FS.stat(c).mode,u=document.createElement("tr");u.innerHTML=`<td class="filename"><a class="filename" href="#" onclick="Cocos2dxHelper.openFile('${c}')">${a+(FS.isDir(d)?"/":"")}</a></td><td class="actions">`+`<a class="file_action" href="#" onclick="Cocos2dxHelper.deleteFile('${c}')"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="ionicon" viewBox="0 0 512 512"><path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352"/><path d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/></svg></a>`+`<a class="file_action" href="#" onclick="Cocos2dxHelper.downloadFile('${c}')"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" width="20" height="20" viewBox="0 0 512 512"><path d="M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 272l80 80 80-80M256 48v288"/></svg></a>`+"</td>",i.appendChild(u)}},newFolder:function(){var e=prompt("Please enter your folder name","New Folder");FS.mkdir(Cocos2dxHelper.currentDir+"/"+e),FS.syncfs((function(e){Cocos2dxHelper.refreshFileList(Cocos2dxHelper.currentDir)}))},uploadFiles:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple","true"),e.addEventListener("change",(function(){var t=e.files,r=Array.from(t,(function(e){return e.arrayBuffer()}));Promise.all(r).then((function(e){for(var r=0;r<t.length;r++)FS.writeFile(Cocos2dxHelper.currentDir+"/"+t[r].name,new Uint8Array(e[r]));FS.syncfs((function(e){Cocos2dxHelper.refreshFileList(Cocos2dxHelper.currentDir)}))}))})),e.click()},downloadFile:function(e){var t=FS.stat(e).mode;if(FS.isDir(t))alert("Downloading folder is not supported yet!");else{var r=FS.readFile(e),o=new Blob([r.buffer]),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=e.substr(e.lastIndexOf("/")+1),n.click()}},deleteFile:function(e){if(confirm(`Are you sure you want permanently delete ${e}?`)){var t=function(e){var r=FS.stat(e).mode;if(FS.isDir(r)){for(var o=FS.readdir(e),n=2;n<o.length;n++)t(e+"/"+o[n]);FS.rmdir(e)}else FS.unlink(e)};t(e),FS.syncfs((function(e){Cocos2dxHelper.refreshFileList(Cocos2dxHelper.currentDir)}))}},openFile:function(e){var t=FS.stat(e).mode;if(FS.isDir(t))return Cocos2dxHelper.currentDir=e,void Cocos2dxHelper.refreshFileList();const r=document.getElementById("imageViewer");r.style.display="none",Cocos2dxHelper.closeEditor();const o=e.substr(e.lastIndexOf(".")+1),n={gif:"gif",jpg:"jpeg",jpeg:"jpeg",png:"png",webp:"webp",tiff:"tiff",bmp:"bmp"};if(n[o]){for(r.style.display="flow";r.childElementCount>1;)r.removeChild(r.lastChild);var i=document.createElement("img");const t=FS.readFile(e);var l="";const a=8192;for(var s=0;s<t.length/a;s++)l+=String.fromCharCode.apply(null,t.slice(s*a,(s+1)*a));return l+=String.fromCharCode.apply(null,t.slice(s*a)),i.setAttribute("class","imageviewer"),i.src=`data:image/${n[o]};base64,${btoa(l)}`,void r.appendChild(i)}document.getElementById("editor").style.display="flow",document.getElementById("editorPath").innerText=e;const a=document.getElementById("editorPane"),c=FS.readFile(e,{encoding:"utf8"}),d={lua:"lua",js:"javascript",cpp:"cpp",h:"cpp",hpp:"cpp",c:"c",vert:"glsl",frag:"glsl"}[e.substr(e.lastIndexOf(".")+1)];window.require.config({paths:{vs:"https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.9.0/min/vs"}}),require(["vs/editor/editor.main"],(function(){var t=Cocos2dxHelper.editor;t.path=e,t.instance=window.monaco.editor.create(a,{value:c,language:d||"plaintext",theme:"vs-dark",automaticLayout:!0}),t.instance.getModel().onDidChangeContent((function(){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout((function(){FS.writeFile(t.path,t.instance.getValue()),FS.syncfs((function(e){if(e)throw e}))}),1e3)}))}))},closeEditor:function(){var e=Cocos2dxHelper.editor;e.instance&&(FS.writeFile(e.path,e.instance.getValue()),FS.syncfs((function(e){if(e)throw e})),e.instance.dispose(),e.timeout&&clearTimeout(e.timeout)),Cocos2dxHelper.editor={},document.getElementById("editor").style.display="none"},editor:{}}</script><script src=https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.9.0/min/vs/loader.js></script><script src=lua-playground.js async></script></body></html>